<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"     
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="templates/modelo2.xhtml"
                xmlns:p="http://primefaces.org/ui"                
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">   

    <ui:define name="conteudo">        
        <div style="height: 100%; background: url(resources/imagens/imagem8.jpg) no-repeat; background-size: cover;">
            <div style="margin-top: 0px;">              
                <h:panelGrid columns="2" style="margin: 0 auto; padding-top: 50px;">               
                    <p:panel header="Tela de login - GESTOUR" style="width: 320px; height:360px ">                    
                        <div style="margin-top: 10px">
                            <h:form id="login">
                                <p:focus context="login"/>                         
                                <h:panelGrid columns="1" style="width: 100%">
                                    <h:panelGrid columns="1" style="width: 100%">
                                        <p:outputLabel value="Email"/>
                                        <p:inputText value="#{MBAutenticacao.email}" required="true" requiredMessage="O campo email é obrigatorio" placeholder="Seu email" style="width: 100%" autocomplete="off"/>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="1" style="width: 100%; margin-top: 5px;">
                                        <p:outputLabel value="Senha"/>
                                        <p:password size="20" value="#{MBAutenticacao.senha}" required="true" requiredMessage="O campo senha é obrigatorio" placeholder="Sua senha" style="width: 100%"/>
                                    </h:panelGrid>
                                    <h:panelGrid columns="1" style="width: 100%; margin-top: 15px; text-align: center;">                         
                                        <p:commandButton action="#{MBAutenticacao.entrar()}" value="Entrar" title="Entrar" style="width: 100%; height: 40px" id="entrar" update=":msgGlobal"/><br/>  
                                    </h:panelGrid>
                                </h:panelGrid>               
                            </h:form> 
                            <h:form id="frmCadastro">
                                <div style="margin-top: 30px; text-align: center;">
                                    <p:commandButton id="cadastrar" value="Não tenho cadastro" title="Não tenho cadastro" actionListener="#{MBEmpresa.iniciar()}" oncomplete="PF('dlgCadastro').show();" update=":frmLogin :msgGlobal"/>
                                </div>
                            </h:form>
                        </div>                        
                        <hr/>
                    </p:panel>               
                </h:panelGrid> 
            </div>
        </div>         
        <p:blockUI block="login" trigger="login:entrar">                
            <p:graphicImage library="imagens" name="carregar.gif"/>
        </p:blockUI>
        <p:dialog widgetVar="dlgCadastro" closable="true" draggable="false" resizable="false" header="Não tenho cadastro" modal="true" appendTo="@(body)">
            <h:form id="frmLogin">
                <h:panelGrid columns="1">
                    <h:panelGrid columns="3">
                        <h:panelGrid columns="1">
                            <p:outputLabel  value="Nome da empresa"/>                       
                            <p:inputText value="#{MBEmpresa.empresa.nomeEmpresa}" size="40" maxlength="60" required="true" requiredMessage="O campo nome da empresa é obrigatorio" placeholder="Nome da empresa"/>
                        </h:panelGrid>
                        <h:panelGrid columns="1">
                            <p:outputLabel  value="Nome do proprietário"/>
                            <p:inputText value="#{MBEmpresa.empresa.nomeProprietario}" size="40" maxlength="60" required="true" requiredMessage="O campo nome do proprietário" placeholder="Nome do proprietário"/>
                        </h:panelGrid> 
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Cnpj"/>
                            <p:inputMask mask="99.999.999/9999-99" value="#{MBEmpresa.empresa.cnpj}" size="40"  required="true" requiredMessage="O campo cnpj é obrigatorio" maxlength="20" placeholder="Cnpj"/>
                        </h:panelGrid>
                    </h:panelGrid>
                    <h:panelGrid columns="3">
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Telefone"/>
                            <p:inputMask value="#{MBEmpresa.empresa.telefone}" mask="(99) 9 9999-9999" size="40" placeholder="Celular" required="true" requiredMessage="Preencha o campo telefone"/>
                        </h:panelGrid> 
                        <h:panelGrid columns="1">
                            <p:outputLabel value="E-mail"/>
                            <p:inputText type="email" value="#{MBEmpresa.empresa.email}" size="40" maxlength="60" placeholder="E-mail" required="true" requiredMessage="Preencha o campo e-mail" validatorMessage="Email não aceito">
                                <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                            </p:inputText> 
                        </h:panelGrid>
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Senha"/>
                            <p:password value="#{MBEmpresa.empresa.senha}" size="40"  required="true" requiredMessage="O campo senha é obrigatorio" maxlength="30" placeholder="Senha"/>
                        </h:panelGrid>
                    </h:panelGrid>
                    <h:panelGrid columns="5">
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Cidade"/>
                            <p:inputText value="#{MBEmpresa.empresa.cidade}" size="30" maxlength="40" placeholder="Cidade" required="true" requiredMessage="Preencha o campo cidade" />
                        </h:panelGrid>
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Bairro"/>
                            <p:inputText value="#{MBEmpresa.empresa.bairro}" size="30" maxlength="40" placeholder="Bairro" required="true" requiredMessage="Preencha o campo bairro" />
                        </h:panelGrid>
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Rua"/>
                            <p:inputText value="#{MBEmpresa.empresa.rua}" size="35" maxlength="60" placeholder="Rua" required="true" requiredMessage="Preencha o campo rua" />
                        </h:panelGrid>
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Número"/>
                            <p:inputText value="#{MBEmpresa.empresa.numero}" size="10" maxlength="10" placeholder="Numero" required="true" requiredMessage="Preencha o campo numero" />
                        </h:panelGrid>
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Cep"/>
                            <p:inputMask mask="99999-999" value="#{MBEmpresa.empresa.cep}" size="10" maxlength="10" placeholder="Cep" required="true" requiredMessage="Preencha o campo cep" />
                        </h:panelGrid>   
                    </h:panelGrid>
                    <h:panelGrid columns="3">
                        <h:panelGrid columns="1">
                            <p:outputLabel value="Estado"/>
                            <p:selectOneMenu value="#{MBEmpresa.empresa.estado}" filter="true" required="true" requiredMessage="Selecione um estado">
                                <f:selectItem itemLabel="Selecione um estado" itemValue="#{null}"/> 
                                <f:selectItem itemLabel="Acre" itemValue="AC"/>      
                                <f:selectItem itemLabel="Alagoas" itemValue="AL"/>   
                                <f:selectItem itemLabel="Amapá" itemValue="AP"/>      
                                <f:selectItem itemLabel="Amazonas" itemValue="AM"/>   
                                <f:selectItem itemLabel="Bahia" itemValue="BA"/>      
                                <f:selectItem itemLabel="Ceará" itemValue="CE"/>   
                                <f:selectItem itemLabel="Distrito Federal" itemValue="DF"/>      
                                <f:selectItem itemLabel="Espirito Santo" itemValue="ES"/>   
                                <f:selectItem itemLabel="Goiás" itemValue="GO"/>      
                                <f:selectItem itemLabel="Maranhão" itemValue="MA"/>   
                                <f:selectItem itemLabel="Mato Grosso" itemValue="MT"/>      
                                <f:selectItem itemLabel="Mato Grosso do Sul" itemValue="MS"/>   
                                <f:selectItem itemLabel="Minas Gerais" itemValue="MG"/>      
                                <f:selectItem itemLabel="Pará" itemValue="PA"/>   
                                <f:selectItem itemLabel="Paraiba" itemValue="PB"/>      
                                <f:selectItem itemLabel="Paraná" itemValue="PR"/>   
                                <f:selectItem itemLabel="Pernanbuco" itemValue="PE"/>      
                                <f:selectItem itemLabel="Piauí" itemValue="PI"/>   
                                <f:selectItem itemLabel="Rio de Janeiro" itemValue="RJ"/>      
                                <f:selectItem itemLabel="Rio Grande do Norte" itemValue="RN"/>   
                                <f:selectItem itemLabel="Rio Grande do Sul" itemValue="RS"/>      
                                <f:selectItem itemLabel="Rondônia" itemValue="RO"/>   
                                <f:selectItem itemLabel="Roraima" itemValue="RR"/>      
                                <f:selectItem itemLabel="Santa Catarina" itemValue="SC"/>   
                                <f:selectItem itemLabel="São Paulo" itemValue="SP"/>      
                                <f:selectItem itemLabel="Sergipe" itemValue="SE"/>   
                                <f:selectItem itemLabel="Tocantins" itemValue="TO"/>                              
                            </p:selectOneMenu>
                        </h:panelGrid>                                            
                    </h:panelGrid>
                    <h:panelGrid columns="2">
                        <p:commandButton value="Cadastrar" title="Confirmar cadastro" icon="ui-icon-check" id="cadastrar" actionListener="#{MBEmpresa.salvar()}" oncomplete="verificar2(xhr, status, args, 'dlgCadastro')" update=":msgGlobal"/>
                        <p:commandButton value="Fechar" title="Cancelar cadastro" icon="ui-icon-circle-close" onclick="PF('dlgCadastro').hide();" process="@this">
                            <p:resetInput target="frmLogin"/>
                        </p:commandButton>
                    </h:panelGrid>
                </h:panelGrid>
                <p:blockUI block="frmLogin" trigger="frmLogin:cadastrar">                
                    <p:graphicImage library="imagens" name="carregar.gif"/>
                </p:blockUI>
            </h:form>
        </p:dialog>        
    </ui:define>    
</ui:composition>

