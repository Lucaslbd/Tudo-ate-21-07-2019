<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"     
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="templates/modelo2.xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="metadata">
        <f:metadata>      
            <f:viewParam name="acao" value="#{MBCliente.acao}"/>  
            <f:viewParam name="codigo" value="#{MBCliente.codigo}"/>  
            <f:event listener="#{MBCliente.carregarCadastro()}"  type="preRenderView"/>
        </f:metadata>
    </ui:define> 

    <ui:define name="conteudo">  
        <p:toolbar style="margin-bottom: 20px">
            <f:facet name="left">
                <p:outputLabel value="Cadastro de clientes"/>
            </f:facet>
        </p:toolbar>
        <h:form id="frmCadastro">            
            <p:panelGrid columns="1" style="padding: 20px; margin: 0 auto;">
                <h:panelGrid columns="4">
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Nome"/>
                        <p:inputText value="#{MBCliente.cliente.nome}" size="30" maxlength="60" placeholder="Nome" required="true" requiredMessage="Preencha o campo nome" autocomplete="off"/>
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="CPF"/>
                        <p:inputMask value="#{MBCliente.cliente.cpf}" mask="999.999.999-99" size="30" placeholder="CPF" required="true" requiredMessage="Preencha o campo cpf" autocomplete="off"/>  
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Rg"/>
                        <p:inputText value="#{MBCliente.cliente.rg}" size="30" maxlength="20" placeholder="Rg" required="true" requiredMessage="Preencha o campo rg" autocomplete="off"/>
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Nascimento"/>
                        <p:calendar value="#{MBCliente.cliente.nascimento}" mask="99/99/9999" pattern="dd/MM/yyyy" required="true" requiredMessage="Preencha o campo nascimento" />
                    </h:panelGrid>
                </h:panelGrid>
                <h:panelGrid columns="5">
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Estado"/>
                        <p:selectOneMenu value="#{MBCliente.cliente.estado}" filter="true" required="true" requiredMessage="Selecione um estado">
                            <f:selectItem itemLabel="Selecione um estado" itemValue="#{null}"/> 
                            <f:selectItem itemLabel="Acre" itemValue="AC"/>      
                            <f:selectItem itemLabel="Alagoas" itemValue="AL"/>   
                            <f:selectItem itemLabel="Amapá" itemValue="AP"/>      
                            <f:selectItem itemLabel="Amazonas" itemValue="AM"/>   
                            <f:selectItem itemLabel="Bahia" itemValue="BA"/>      
                            <f:selectItem itemLabel="Ceará" itemValue="CE"/>   
                            <f:selectItem itemLabel="Distrito Federal" itemValue="DF"/>      
                            <f:selectItem itemLabel="Espirito Santo" itemValue="ES"/>   
                            <f:selectItem itemLabel="Goiás" itemValue="GO"/>      
                            <f:selectItem itemLabel="Maranhão" itemValue="MA"/>   
                            <f:selectItem itemLabel="Mato Grosso" itemValue="MT"/>      
                            <f:selectItem itemLabel="Mato Grosso do Sul" itemValue="MS"/>   
                            <f:selectItem itemLabel="Minas Gerais" itemValue="MG"/>      
                            <f:selectItem itemLabel="Pará" itemValue="PA"/>   
                            <f:selectItem itemLabel="Paraiba" itemValue="PB"/>      
                            <f:selectItem itemLabel="Paraná" itemValue="PR"/>   
                            <f:selectItem itemLabel="Pernanbuco" itemValue="PE"/>      
                            <f:selectItem itemLabel="Piauí" itemValue="PI"/>   
                            <f:selectItem itemLabel="Rio de Janeiro" itemValue="RJ"/>      
                            <f:selectItem itemLabel="Rio Grande do Norte" itemValue="RN"/>   
                            <f:selectItem itemLabel="Rio Grande do Sul" itemValue="RS"/>      
                            <f:selectItem itemLabel="Rondônia" itemValue="RO"/>   
                            <f:selectItem itemLabel="Roraima" itemValue="RR"/>      
                            <f:selectItem itemLabel="Santa Catarina" itemValue="SC"/>   
                            <f:selectItem itemLabel="São Paulo" itemValue="SP"/>      
                            <f:selectItem itemLabel="Sergipe" itemValue="SE"/>   
                            <f:selectItem itemLabel="Tocantins" itemValue="TO"/>                              
                        </p:selectOneMenu> 
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Cidade"/>
                        <p:inputText value="#{MBCliente.cliente.cidade}" size="30" maxlength="60" placeholder="Cidade" required="true" requiredMessage="Preencha o campo cidade" />
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Bairro"/>
                        <p:inputText value="#{MBCliente.cliente.bairro}" size="30" maxlength="60" placeholder="Bairro" required="true" requiredMessage="Preencha o campo bairro" />
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Rua"/>
                        <p:inputText value="#{MBCliente.cliente.rua}" size="30" maxlength="60" placeholder="Rua" required="true" requiredMessage="Preencha o campo rua" />
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Número"/>
                        <p:inputText value="#{MBCliente.cliente.numero}" size="10" maxlength="10" placeholder="Numero" required="true" requiredMessage="Preencha o campo numero" />
                    </h:panelGrid>
                </h:panelGrid>
                <h:panelGrid columns="3">
                    <h:panelGrid columns="1">
                        <p:outputLabel value="Telefone"/>
                        <p:inputMask value="#{MBCliente.cliente.telefone}" mask="(99) 9 9999-9999" size="40" placeholder="Celular" required="true" requiredMessage="Preencha o campo telefone" autocomplete="off"/>
                    </h:panelGrid>
                    <h:panelGrid columns="1" id="email">
                        <p:outputLabel value="E-mail" rendered="#{!MBCliente.email}"/>
                        <p:inputText type="email" value="#{MBCliente.cliente.email}" size="40" maxlength="60" placeholder="E-mail" required="true" requiredMessage="Preencha o campo e-mail" rendered="#{!MBCliente.email}" validatorMessage="Email não aceito">
                            <f:validateRegex pattern="[\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]" />
                        </p:inputText>               
                    </h:panelGrid>
                    <h:panelGrid columns="1">
                        <p:outputLabel value="-" style="color: white"/>
                        <p:selectBooleanCheckbox value="#{MBCliente.email}"  itemLabel="Não tem email" rendered="#{MBCliente.acao != 2}">
                            <p:ajax update="frmCadastro:email"/>
                        </p:selectBooleanCheckbox>
                    </h:panelGrid>
                </h:panelGrid> 
                <h:panelGrid columns="5">
                    <p:commandButton value="Salvar" title="Salvar" id="salvar" icon="ui-icon-disk" actionListener="#{MBCliente.salvar()}" update=":msgGlobal" rendered="#{MBCliente.acao == 1}"/>
                    <p:commandButton value="Alterar" title="Alterar" icon="ui-icon-pencil" actionListener="#{MBCliente.alterar()}" update=":msgGlobal" rendered="#{MBCliente.acao == 3}"/>
                    <p:button value="Voltar" title="Voltar" icon="ui-icon-arrowreturnthick-1-w" outcome="clientes.xhtml"/>
                </h:panelGrid>
            </p:panelGrid> 
            <p:blockUI block="frmCadastro" trigger="frmCadastro:salvar">                
                <p:graphicImage library="imagens" name="carregar.gif" />                
            </p:blockUI> 
        </h:form>
    </ui:define>    
</ui:composition>

